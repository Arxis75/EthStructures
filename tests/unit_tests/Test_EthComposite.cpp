#include <gtest/gtest.h>
#include <EthStructures/EthComposite.h>

TEST(Test_EthComposite, mainnet_block_13850126)
{
    // Block 13850126 (Mainnet)
    // Cf https://milindmovasha.github.io/show-merkle-tree/
    // Tx0 (0x80): 0x02F901980181B28514419AA6008514419AA6008302251694DEF1C0DED9BEC7F1A1670819833240F027B25EFF80B90128D9627AA400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000039ED597382701706E00000000000000000000000000000000000000000000000001907CC43940286A000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000EC9F76202A7061EB9B3A7D6B59D36215A7E37DA000000000000000000000000EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE869584CD00000000000000000000000086003B044F70DAC0ABC80AC8957305B6370893ED00000000000000000000000000000000000000000000007DA19326C761C21C35C080A079A625EBF730BB5B09157A2DDB7BDAECCF5C169B1CA0477C8C10D7BB0A8A44A0A02A9310244FB78E6024A02518C4194309E7ECFE9940CDCC02F0E0D55DAF0C0B63
    // Tx1 (0x01): 0x02F8B401830BC3F38477359400851FAA3B50008303D09094A0B86991C6218B36C1D19D4A2E9EB0CE3606EB4880B844A9059CBB000000000000000000000000B0BBACD27AC451B84AEA06CB789400AB554E040D0000000000000000000000000000000000000000000000000000000000D14B65C080A001EDAAEB6A9EB9EE6B9A57AA4E5335CD29507E051A7B2A0A10CCB47BFBBDF90AA04C3ABFB5CCA06B1F638117FDBED13FC54A555AFAA1206A1FA90C9BF2F443C469
    //SHOULD BE => ByteSet txs("0xf90258b9019c02f901980181b28514419aa6008514419aa6008302251694def1c0ded9bec7f1a1670819833240f027b25eff80b90128d9627aa400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000039ed597382701706e00000000000000000000000000000000000000000000000001907cc43940286a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000ec9f76202a7061eb9b3a7d6b59d36215a7e37da000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee869584cd00000000000000000000000086003b044f70dac0abc80ac8957305b6370893ed00000000000000000000000000000000000000000000007da19326c761c21c35c080a079a625ebf730bb5b09157a2ddb7bdaeccf5c169b1ca0477c8c10d7bb0a8a44a0a02a9310244fb78e6024a02518c4194309e7ecfe9940cdcc02f0e0d55daf0c0b63b8b702f8b401830bc3f38477359400851faa3b50008303d09094a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4880b844a9059cbb000000000000000000000000b0bbacd27ac451b84aea06cb789400ab554e040d0000000000000000000000000000000000000000000000000000000000d14b65c080a001edaaeb6a9eb9ee6b9a57aa4e5335cd29507e051a7b2a0a10ccb47bfbbdf90aa04c3abfb5cca06b1f638117fdbed13fc54a555afaa1206a1fa90c9bf2f443c469");
    ByteSet txs("0xf90258b9019c02f901980181b28514419aa6008514419aa6008302251694def1c0ded9bec7f1a1670819833240f027b25eff80b90128d9627aa400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000039ed597382701706e00000000000000000000000000000000000000000000000001907cc43940286a000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000ec9f76202a7061eb9b3a7d6b59d36215a7e37da000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee869584cd00000000000000000000000086003b044f70dac0abc80ac8957305b6370893ed00000000000000000000000000000000000000000000007da19326c761c21c35c080a079a625ebf730bb5b09157a2ddb7bdaeccf5c169b1ca0477c8c10d7bb0a8a44a0a02a9310244fb78e6024a02518c4194309e7ecfe9940cdcc02f0e0d55daf0c0b63b8b702f8b401830bc3f38477359400851faa3b50008303d09094a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4880b844a9059cbb000000000000000000000000b0bbacd27ac451b84aea06cb789400ab554e040d0000000000000000000000000000000000000000000000000000000000d14b65c080a001edaaeb6a9eb9ee6b9a57aa4e5335cd29507e051a7b2a0a10ccb47bfbbdf90aa04c3abfb5cca06b1f638117fdbed13fc54a555afaa1206a1fa90c9bf2f443c469");

    BlockTransactions Txs;
    Txs.parse(txs);

    //for(uint i=0;i<2;i++)
    //    cout << Txs.get<Transaction>(i)->serialize().asString() << endl;

    auto calculated_Txs_hash = Txs.hash();
    ASSERT_EQ(ByteSet<BYTE>("0x65b67b52005739dd49bef7fc501f172854eedcdb1cea06f7c76d4bb93535d785"), calculated_Txs_hash);
}

TEST(Test_EthComposite, hoodi_block_1547723)
{
    //Block 1547723 (Hoodi)

    /********************************************* Hashes: ***********************************************************
    Block_raw_RLP:
    0xf90e04f90277a01eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f3390a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794dd11751cdd3f6eff01b1f6151b640685bfa5db4aa0a7d39c8dae3531da3eca6d0560ce4463064ad782eda2820526190bef86417de3a07459532742aecb6526b9e6a7af8890bdc247dd411df46eabf4156f2ce666b47ca07628feeec97bad383c116befecccf8cc4b6e0a5743e090f8be172c5590b24edeb901000000400000000040100000000000000081004000000200000000000000010002000080000100010000020000000001000001000000000000020800000000000060010014000000000020000c00000420010000000001000000001100000000000000000002000240040801000008080000000000000000008004001000000010000020200040000000000000000200000000000000000000000800000200000018040000000000008008010020002002000000200000a0000000100000108880100000020001000000024000008001000000000000401400000004001000200002000008000000000100120000100000804002000240000000000800040000008083179dcb8403938700831c721a846908ecd48b544f4f4c2076302e362e30a019539c12dca0726463529fff9ae268285e00b69e542badf2430a126f2f2ab211880000000000000000843fe8e61fa0c277b20309fa9bf2eb715aa056ca7ec22135136ca721cc6681ae2a1d6a241b3483080000840563f746a0eb2cb9679b405677c3109e02c331bd960fefd87d53df37a8bc422eae12657f22a0e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855f90953b902da02f902d683088bb082a84e847735940084f707603e830bf9989491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000de68465dfca7ff708059ba948c31a872d01f6aba0000000000000000000000000000000000000000000000000000000000179dca47f1b1ab74edbdf3d96ab5ce084cd3141438ce9faa719deda6de91cccb54fa771eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f339000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d1817beb6629409d571310aac498857942592581ec11270577b3dfd0a2b95db6427c2302607f2c5f446d716bb4085cbd521147f6a6306445fc57381097a42b93c00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0d8e6922390d7d48a902eb1c3d85bd715351430639aa10b248c2073b6e7fe35dba06bb8cccd8615b46c6a063a276367fa8e4067cf7b82d09ca055662f273fffbb04b902da02f902d683088bb082a84f847735940084f707603e830ebe319491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000328d6c70cd1ca8e45598aedcbe3683af02bb309f0000000000000000000000000000000000000000000000000000000000179dca56f4de2ccb6139c3cac95d46781f2342404bb2f2ca28e50e96a43248a4a4d9821eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f339000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d251022595d1e7e78d08b9a788a518f6cb5389ae9e35b531f7cede608e5f294120230b685f64bc59e73a0eaac5850c84d1c61896557d53c8dc3335a5fbbb356d800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a064f707c839c3793340819ea7d0cf05bb7e44bcf1dc335397b09a2264983bc8e0a007818d70d1601216aff5bf0a986528cfcf47ea075df9ba65b481cb3ce53d58e8f8ac0684c8f4c0f28301b14194da38de6dba36918e716ade6a3ac7944d6a5d568380b844d0dbc83300000000000000000000000042cd2134256065f82355d60fb3b50faf0a7ad58a000000000000000000000000000000000000000000000000000000e8d4a5100083111784a03f00b65770a7b69c562857c87faf62f1030f5f3332427e5701b4dbb23a1256f6a00732169ab52ab1edea45a18d2ad1f3bcecc1f154d384c404646cba9113519917b89b03f89883088bb082067e84773594008505d21dba0082520894bc9aabe46838b2ee4df9478a4686da731943f23d8080c08504a817c800e1a001895828c34c7f6f6decd5798a3a09c0b8ee9b0d0f7e49d1d7340b1d3fa0f6ef01a0420ee05ca0650482dcc9f8b8796fc619b1110dc88b41c707dd0d336956787d44a05163b8c631946c46e0059c54f674b58e39323d4e91cc853837b47ad8ddb9a5d5b89b03f89883088bb08206ce84773594008505d21dba008252089453b344eef7db18321078d62bc8157a6ec4e0944f8080c08504a817c800e1a001dc6fe21305f425716f9d9d90321b2d62670f52b9d79e3f29bfe41201788e1701a0995bc2fc283ae83ba440914444a407cdb0d2c86ab16c1a8fe0d34610b3322ed3a005d61b3db89a95dc960dc657fbc6e551f81bca570c73fff959274682abb24785b89b03f89883088bb0820d2984773594008504a817c80082520894765c7e4917cd47048f35d92e5e28cf546a0277098080c08504a817c800e1a0015a908c6e86245029773071b85064c6868059b7e78fc37a19d6296132987a0501a04c85f8523b942b52460d00d0eca0969e3a030c1bda68443234136a755ecf3b1ea04c02a2f0f36dcb5c475a0a1a3c98d295616e089f9f672cfbadb1d2b3e9cab373b89b03f89883088bb08206e484773594008505d21dba0082520894ee0ff342d45b1731e2709bf8a14465316b6e6e608080c08504a817c800e1a0016bae7b55b8e763c10fab9ac6ac8424abfe9b77383820a59b119cd9ff70e13601a0bbb58f81c65fb3a9902cf7b0cee82a27f82c78cc16b118f5ab376f96bccff142a008f6c71b2064910716814e0e3cceeec415ceadcb63c4bfc6198574cd2c83621fb87502f87283088bb082848c80843fe8e61f8252089425941dc771bb64514fc8abbce970307fb9d477e9870d1834ff970be280c001a0350f6b1ea61ebdbbca303cd9f44271a5b6d922bf690d242b3ca6daeb5cc5b6c3a0299f3a7eed904a06fe20c5f89c54f332910eccb2aadf45c7f20d7b917ddeaebcc0f90230e2840177aeb3830d11ec94767f7576944d321374921df138589a30e3c5030d8330f3d8e2840177aeb4830d11ed94767f7576944d321374921df138589a30e3c5030d83312647e2840177aeb5830d11ee94767f7576944d321374921df138589a30e3c5030d83312ca0e2840177aeb6830d11ef94767f7576944d321374921df138589a30e3c5030d83314c2fe2840177aeb7830d11f094767f7576944d321374921df138589a30e3c5030d83309794e2840177aeb8830d11f194767f7576944d321374921df138589a30e3c5030d83311344e2840177aeb9830d11f294767f7576944d321374921df138589a30e3c5030d833080b3e2840177aeba830d11f394767f7576944d321374921df138589a30e3c5030d8330e216e2840177aebb830d11f494767f7576944d321374921df138589a30e3c5030d8330ce2be2840177aebc830d11f594767f7576944d321374921df138589a30e3c5030d83316114e2840177aebd830d11f694767f7576944d321374921df138589a30e3c5030d8330e770e2840177aebe830d11f794767f7576944d321374921df138589a30e3c5030d8331165de2840177aebf830d11f894767f7576944d321374921df138589a30e3c5030d833122eae2840177aec0830d11f994767f7576944d321374921df138589a30e3c5030d83315113e2840177aec1830d11fa94767f7576944d321374921df138589a30e3c5030d83310754e2840177aec2830d11fb94767f7576944d321374921df138589a30e3c5030d8330e9e7

    curl https://hoodi.infura.io/v3/<INFURA_ID>   -X POST   -H "Content-Type: application/json"   -d '{"jsonrpc": "2.0", "method": "eth_getBlockByNumber", "params": ["0x179DCB", true], "id": 1}'

    LEAF-0:
    ["0x30","0x02F902D683088BB082A84E847735940084F707603E830BF9989491CB447BAFC6E0EA0F4FE056F5A9B1F14BB06E5D80B9026496051D56000000000000000000000000DE68465DFCA7FF708059BA948C31A872D01F6ABA0000000000000000000000000000000000000000000000000000000000179DCA47F1B1AB74EDBDF3D96AB5CE084CD3141438CE9FAA719DEDA6DE91CCCB54FA771EB05E67097AE0C68B73431963743424E9BC8D2DA20EB3BD87D8D314361F339000000000000000000000000000000000000000000000000000000000000001C000000000000000000000000000000000000000000000000000000000000002402EA2A60F8719ED0DF1B24E8C6211E9BAF8FA89EBAC54027052CC7F9FB846E66A2B717DD287FE95288A096AB65379549295446DC08A7D4BF6DDA9813E8ADE66C701C18D1171BF542420BBE786ECE560A4F80F982FBB7DE983D272DB821D28058807A87EB688DFD8652447324B24448D36AA54F7DC47F46AEE044818D2E14E54B4059C69F44DF7B67A7B5A18B679ED3301921D712C5ED71DB739C4AA12611A1B3F2F86FF2D2799DB489E6556353217BAA277AD0377515C5A69C9585700C09AD58D1817BEB6629409D571310AAC498857942592581EC11270577B3DFD0A2B95DB6427C2302607F2C5F446D716BB4085CBD521147F6A6306445FC57381097A42B93C00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000C616369647261696E3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C001A0D8E6922390D7D48A902EB1C3D85BD715351430639AA10B248C2073B6E7FE35DBA06BB8CCCD8615B46C6A063A276367FA8E4067CF7B82D09CA055662F273FFFBB04"]
    = 0xfeee9f67cb9051f357f5053fc9f21aa71c6e46c61b63bb720b7895b036e87317

    LEAF-1:
    ["0x20","0x02F902D683088BB082A84F847735940084F707603E830EBE319491CB447BAFC6E0EA0F4FE056F5A9B1F14BB06E5D80B9026496051D56000000000000000000000000328D6C70CD1CA8E45598AEDCBE3683AF02BB309F0000000000000000000000000000000000000000000000000000000000179DCA56F4DE2CCB6139C3CAC95D46781F2342404BB2F2CA28E50E96A43248A4A4D9821EB05E67097AE0C68B73431963743424E9BC8D2DA20EB3BD87D8D314361F339000000000000000000000000000000000000000000000000000000000000001C000000000000000000000000000000000000000000000000000000000000002402EA2A60F8719ED0DF1B24E8C6211E9BAF8FA89EBAC54027052CC7F9FB846E66A2B717DD287FE95288A096AB65379549295446DC08A7D4BF6DDA9813E8ADE66C701C18D1171BF542420BBE786ECE560A4F80F982FBB7DE983D272DB821D28058807A87EB688DFD8652447324B24448D36AA54F7DC47F46AEE044818D2E14E54B4059C69F44DF7B67A7B5A18B679ED3301921D712C5ED71DB739C4AA12611A1B3F2F86FF2D2799DB489E6556353217BAA277AD0377515C5A69C9585700C09AD58D251022595D1E7E78D08B9A788A518F6CB5389AE9E35B531F7CEDE608E5F294120230B685F64BC59E73A0EAAC5850C84D1C61896557D53C8DC3335A5FBBB356D800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000C616369647261696E3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C001A064F707C839C3793340819EA7D0CF05BB7E44BCF1DC335397B09A2264983BC8E0A007818D70D1601216AFF5BF0A986528CFCF47EA075DF9BA65B481CB3CE53D58E8"]
    = 0xf79a4b19b95b7948c0983972087de82c3903da853ff46f60950f2031646cc489

    LEAF-2:
    ["0x20","0xF8AC0684C8F4C0F28301B14194DA38DE6DBA36918E716ADE6A3AC7944D6A5D568380B844D0DBC83300000000000000000000000042CD2134256065F82355D60FB3B50FAF0A7AD58A000000000000000000000000000000000000000000000000000000E8D4A5100083111784A03F00B65770A7B69C562857C87FAF62F1030F5F3332427E5701B4DBB23A1256F6A00732169AB52AB1EDEA45A18D2AD1F3BCECC1F154D384C404646CBA9113519917"]
    = 0x26f6b5587d8d5e2a43b2aead95b6c9c0589aa6be305788c29da802113d6c235a

    LEAF-3:
    ["0x20","0x03F89883088BB082067E84773594008505D21DBA0082520894BC9AABE46838B2EE4DF9478A4686DA731943F23D8080C08504A817C800E1A001895828C34C7F6F6DECD5798A3A09C0B8EE9B0D0F7E49D1D7340B1D3FA0F6EF01A0420EE05CA0650482DCC9F8B8796FC619B1110DC88B41C707DD0D336956787D44A05163B8C631946C46E0059C54F674B58E39323D4E91CC853837B47AD8DDB9A5D5"]
    = 0xd1df9b86e293bc36204470984f2ec335943a744546deee64c8602a2a39c03d12

    LEAF-4:
    ["0x20","0x03F89883088BB08206CE84773594008505D21DBA008252089453B344EEF7DB18321078D62BC8157A6EC4E0944F8080C08504A817C800E1A001DC6FE21305F425716F9D9D90321B2D62670F52B9D79E3F29BFE41201788E1701A0995BC2FC283AE83BA440914444A407CDB0D2C86AB16C1A8FE0D34610B3322ED3A005D61B3DB89A95DC960DC657FBC6E551F81BCA570C73FFF959274682ABB24785"]
    = 0xe8e9c1abbdb314a725bcebb61c2ede26d29f9e79426aa3ee79a6d35026180d5e

    LEAF-5:
    ["0x20","0x03F89883088BB0820D2984773594008504A817C80082520894765C7E4917CD47048F35D92E5E28CF546A0277098080C08504A817C800E1A0015A908C6E86245029773071B85064C6868059B7E78FC37A19D6296132987A0501A04C85F8523B942B52460D00D0ECA0969E3A030C1BDA68443234136A755ECF3B1EA04C02A2F0F36DCB5C475A0A1A3C98D295616E089F9F672CFBADB1D2B3E9CAB373"]
    = 0xc92b239320f7a65954ad71e482d481f9693a2c04c9af91a4407a4b1e088eaea5

    LEAF-6:
    ["0x20","0x03F89883088BB08206E484773594008505D21DBA0082520894EE0FF342D45B1731E2709BF8A14465316B6E6E608080C08504A817C800E1A0016BAE7B55B8E763C10FAB9AC6AC8424ABFE9B77383820A59B119CD9FF70E13601A0BBB58F81C65FB3A9902CF7B0CEE82A27F82C78CC16B118F5AB376F96BCCFF142A008F6C71B2064910716814E0E3CCEEEC415CEADCB63C4BFC6198574CD2C83621F"]
    = 0xd9d85973aa69e4404417eb94f17e2f9a158f6138c91b5d27088c472c1004f462

    LEAF-7:
    ["0x20","0x02F87283088BB082848C80843FE8E61F8252089425941DC771BB64514FC8ABBCE970307FB9D477E9870D1834FF970BE280C001A0350F6B1EA61EBDBBCA303CD9F44271A5B6D922BF690D242B3CA6DAEB5CC5B6C3A0299F3A7EED904A06FE20C5F89C54F332910ECCB2AADF45C7F20D7B917DDEAEBC"]
    = 0xea73fa9911ce590e5ca491b0c20d03c7a2e37cc66339453d893e7a466ac3ae93

    BN-1 Hash:
    ["0x","0xf79a4b19b95b7948c0983972087de82c3903da853ff46f60950f2031646cc489","0x26f6b5587d8d5e2a43b2aead95b6c9c0589aa6be305788c29da802113d6c235a","0xd1df9b86e293bc36204470984f2ec335943a744546deee64c8602a2a39c03d12","0xe8e9c1abbdb314a725bcebb61c2ede26d29f9e79426aa3ee79a6d35026180d5e","0xc92b239320f7a65954ad71e482d481f9693a2c04c9af91a4407a4b1e088eaea5","0xd9d85973aa69e4404417eb94f17e2f9a158f6138c91b5d27088c472c1004f462","0xea73fa9911ce590e5ca491b0c20d03c7a2e37cc66339453d893e7a466ac3ae93","0x","0x","0x","0x","0x","0x","0x","0x","0x"]
    = 0x175ee9ca9042b37cca7e62ef1b11f9c6d61cdcd9adc5b65eb079d4d2ce81887e

    BN-0 Hash (Tx RootHash):
    ["0x175ee9ca9042b37cca7e62ef1b11f9c6d61cdcd9adc5b65eb079d4d2ce81887e","0x","0x","0x","0x","0x","0x","0x","0xfeee9f67cb9051f357f5053fc9f21aa71c6e46c61b63bb720b7895b036e87317","0x","0x","0x","0x","0x","0x","0x","0x"]
    = 0x7459532742aecb6526b9e6a7af8890bdc247dd411df46eabf4156f2ce666b47c

    ********************************************************************************************************************/

    ByteSet block_rlp("0xf90e04f90277a01eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f3390a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794dd11751cdd3f6eff01b1f6151b640685bfa5db4aa0a7d39c8dae3531da3eca6d0560ce4463064ad782eda2820526190bef86417de3a07459532742aecb6526b9e6a7af8890bdc247dd411df46eabf4156f2ce666b47ca07628feeec97bad383c116befecccf8cc4b6e0a5743e090f8be172c5590b24edeb901000000400000000040100000000000000081004000000200000000000000010002000080000100010000020000000001000001000000000000020800000000000060010014000000000020000c00000420010000000001000000001100000000000000000002000240040801000008080000000000000000008004001000000010000020200040000000000000000200000000000000000000000800000200000018040000000000008008010020002002000000200000a0000000100000108880100000020001000000024000008001000000000000401400000004001000200002000008000000000100120000100000804002000240000000000800040000008083179dcb8403938700831c721a846908ecd48b544f4f4c2076302e362e30a019539c12dca0726463529fff9ae268285e00b69e542badf2430a126f2f2ab211880000000000000000843fe8e61fa0c277b20309fa9bf2eb715aa056ca7ec22135136ca721cc6681ae2a1d6a241b3483080000840563f746a0eb2cb9679b405677c3109e02c331bd960fefd87d53df37a8bc422eae12657f22a0e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855f90953b902da02f902d683088bb082a84e847735940084f707603e830bf9989491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000de68465dfca7ff708059ba948c31a872d01f6aba0000000000000000000000000000000000000000000000000000000000179dca47f1b1ab74edbdf3d96ab5ce084cd3141438ce9faa719deda6de91cccb54fa771eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f339000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d1817beb6629409d571310aac498857942592581ec11270577b3dfd0a2b95db6427c2302607f2c5f446d716bb4085cbd521147f6a6306445fc57381097a42b93c00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0d8e6922390d7d48a902eb1c3d85bd715351430639aa10b248c2073b6e7fe35dba06bb8cccd8615b46c6a063a276367fa8e4067cf7b82d09ca055662f273fffbb04b902da02f902d683088bb082a84f847735940084f707603e830ebe319491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000328d6c70cd1ca8e45598aedcbe3683af02bb309f0000000000000000000000000000000000000000000000000000000000179dca56f4de2ccb6139c3cac95d46781f2342404bb2f2ca28e50e96a43248a4a4d9821eb05e67097ae0c68b73431963743424e9bc8d2da20eb3bd87d8d314361f339000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d251022595d1e7e78d08b9a788a518f6cb5389ae9e35b531f7cede608e5f294120230b685f64bc59e73a0eaac5850c84d1c61896557d53c8dc3335a5fbbb356d800000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a064f707c839c3793340819ea7d0cf05bb7e44bcf1dc335397b09a2264983bc8e0a007818d70d1601216aff5bf0a986528cfcf47ea075df9ba65b481cb3ce53d58e8f8ac0684c8f4c0f28301b14194da38de6dba36918e716ade6a3ac7944d6a5d568380b844d0dbc83300000000000000000000000042cd2134256065f82355d60fb3b50faf0a7ad58a000000000000000000000000000000000000000000000000000000e8d4a5100083111784a03f00b65770a7b69c562857c87faf62f1030f5f3332427e5701b4dbb23a1256f6a00732169ab52ab1edea45a18d2ad1f3bcecc1f154d384c404646cba9113519917b89b03f89883088bb082067e84773594008505d21dba0082520894bc9aabe46838b2ee4df9478a4686da731943f23d8080c08504a817c800e1a001895828c34c7f6f6decd5798a3a09c0b8ee9b0d0f7e49d1d7340b1d3fa0f6ef01a0420ee05ca0650482dcc9f8b8796fc619b1110dc88b41c707dd0d336956787d44a05163b8c631946c46e0059c54f674b58e39323d4e91cc853837b47ad8ddb9a5d5b89b03f89883088bb08206ce84773594008505d21dba008252089453b344eef7db18321078d62bc8157a6ec4e0944f8080c08504a817c800e1a001dc6fe21305f425716f9d9d90321b2d62670f52b9d79e3f29bfe41201788e1701a0995bc2fc283ae83ba440914444a407cdb0d2c86ab16c1a8fe0d34610b3322ed3a005d61b3db89a95dc960dc657fbc6e551f81bca570c73fff959274682abb24785b89b03f89883088bb0820d2984773594008504a817c80082520894765c7e4917cd47048f35d92e5e28cf546a0277098080c08504a817c800e1a0015a908c6e86245029773071b85064c6868059b7e78fc37a19d6296132987a0501a04c85f8523b942b52460d00d0eca0969e3a030c1bda68443234136a755ecf3b1ea04c02a2f0f36dcb5c475a0a1a3c98d295616e089f9f672cfbadb1d2b3e9cab373b89b03f89883088bb08206e484773594008505d21dba0082520894ee0ff342d45b1731e2709bf8a14465316b6e6e608080c08504a817c800e1a0016bae7b55b8e763c10fab9ac6ac8424abfe9b77383820a59b119cd9ff70e13601a0bbb58f81c65fb3a9902cf7b0cee82a27f82c78cc16b118f5ab376f96bccff142a008f6c71b2064910716814e0e3cceeec415ceadcb63c4bfc6198574cd2c83621fb87502f87283088bb082848c80843fe8e61f8252089425941dc771bb64514fc8abbce970307fb9d477e9870d1834ff970be280c001a0350f6b1ea61ebdbbca303cd9f44271a5b6d922bf690d242b3ca6daeb5cc5b6c3a0299f3a7eed904a06fe20c5f89c54f332910eccb2aadf45c7f20d7b917ddeaebcc0f90230e2840177aeb3830d11ec94767f7576944d321374921df138589a30e3c5030d8330f3d8e2840177aeb4830d11ed94767f7576944d321374921df138589a30e3c5030d83312647e2840177aeb5830d11ee94767f7576944d321374921df138589a30e3c5030d83312ca0e2840177aeb6830d11ef94767f7576944d321374921df138589a30e3c5030d83314c2fe2840177aeb7830d11f094767f7576944d321374921df138589a30e3c5030d83309794e2840177aeb8830d11f194767f7576944d321374921df138589a30e3c5030d83311344e2840177aeb9830d11f294767f7576944d321374921df138589a30e3c5030d833080b3e2840177aeba830d11f394767f7576944d321374921df138589a30e3c5030d8330e216e2840177aebb830d11f494767f7576944d321374921df138589a30e3c5030d8330ce2be2840177aebc830d11f594767f7576944d321374921df138589a30e3c5030d83316114e2840177aebd830d11f694767f7576944d321374921df138589a30e3c5030d8330e770e2840177aebe830d11f794767f7576944d321374921df138589a30e3c5030d8331165de2840177aebf830d11f894767f7576944d321374921df138589a30e3c5030d833122eae2840177aec0830d11f994767f7576944d321374921df138589a30e3c5030d83315113e2840177aec1830d11fa94767f7576944d321374921df138589a30e3c5030d83310754e2840177aec2830d11fb94767f7576944d321374921df138589a30e3c5030d8330e9e7");
    ByteSet block_rlp1 = block_rlp;

    BlockChain bl;
    auto b = bl.newBlockFromRawRLP(block_rlp1);

    block_rlp1 = b->serialize();
    ASSERT_EQ(block_rlp1, block_rlp);

    auto h = b->getHeader();
    auto header_uncles_hash = h->get<Field>(1);
    auto calculated_uncles_hash = b->getUncles()->serialize().keccak256();
    ASSERT_EQ(*header_uncles_hash, calculated_uncles_hash);

    auto header_txs_root_hash = h->get<Field>(4);
    //for(uint i=0;i<8;i++)
    //    cout << b->getTransactions()->get<Transaction>(i)->serialize().asString() << endl;
    auto calculated_Txs_hash = b->getTransactions()->hash();
    ASSERT_EQ(*header_txs_root_hash, calculated_Txs_hash);

    auto header_withdrawals_root_hash = h->get<Field>(16);
    auto calculated_withdrawals_hash = b->getWithdrawals()->hash();
    ASSERT_EQ(*header_withdrawals_root_hash, calculated_withdrawals_hash);
}