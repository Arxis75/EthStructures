----------------------------------------------------------------- GENERAL BLOCK COMPOSITION (source chatGPT) ------------------------------------------------------------


                        Block = [[Header_fields], [[LegacyT_fields], Tv3_blob, [LegacyT_fields], Tv2_blob, ...], [uncles], [[W1_fields], [W2_fields]...]]
                                                            Tvx_blob = Tx_type, [Tvx_Fields]
                                                            Body  = [[transactions], [uncles], [withdrawals]]
]

Fork	            RLP Block Structure	Notes
Frontier → Istanbul	[ header, transactions, uncles ]	            Classic PoW block.
London	            Same	                                        Header gains baseFeePerGas.
Merge	            Same	                                        Header adds parentBeaconBlockRoot; PoW fields frozen.
Shanghai / Capella	[ header, transactions, uncles, withdrawals ]	Fourth element added for withdrawals.
Dencun / Deneb	    [ header, transactions, uncles, withdrawals ]	Still 4 elements; blob data handled off-chain in sidecar.
Pectra / Electra	Same as Dencun	                                No new fields.

-------------------------------------------------------------------- HEADER EVOLUTION (source chatGPT) ------------------------------------------------------------------

Fork / Upgrade	    Activation	Header Changes / New Fields	        Transaction Changes / Signature Notes	                    Withdrawals
Frontier	        2015-07-30  Originalfields	                    Legacy tx                                                   ❌ None
Homestead	        2016-03-14	No major header changes	            Minor tx fee validation updates	                            ❌ None
DAO / Tangerine     2016-10-18	No header changes	                Gas cost adjustments (EIPs 150/158)	                        ❌ None
Spurious Dragon	    2016-11-22	No header changes                   Replay protection (EIP-155)                                 ❌ None
Byzantium	        2017-10-16	No header changes	                New precompiled contracts	                                ❌ None
Constantinople	    2019-02-28	No header changes	                Minor tx optimizations	                                    ❌ None
Istanbul	        2019-12-08	No header changes	                Gas cost changes for certain opcodes	                    ❌ None
Muir Glacier	    2020-01-02	No header changes	                Gas limit adjustments	                                    ❌ None
Berlin	            2021-04-15	No header changes	                New tx types (EIP-2718 envelope txs); legacy txs unchanged	❌ None
London	            2021-08-05	baseFeePerGas added	                EIP-1559 tx type                                            ❌ None
Arrow Glacier	    2022-12-09	No header changes	                Minor tx timing adjustments	                                ❌ None
Merge	            2022-09-15	parentBeaconBlockRoot added        	No major change	                                            ❌ None
Shanghai / Shapella	2023-04-12	withdrawalsRoot added	            Minor adjustments	                                        ✅ Withdrawals   introduced
Dencun / EIP-4844	2024-03-13  blobGasUsed, excessBlobGas added    Blob transactions added	                                    ✅ Same as   post-Shanghai
Pectra	            2025-05-07	requests_hash added	                Enhanced smart wallet capabilities, EIP-3074	            ✅ Independent   withdrawals (EIP-7002)

----------------------------------------------------------------- Nodes Block Storage (source chatGPT) ------------------------------------------------------------------

+--------------------------------------------------------------------------------------+
| Field           | Archive Node     | Full Node (Pruned)           | Light 
+--------------------------------------------------------------------------------------+
| Header          | ✅ Always        | ✅    Recent & Old           | ✅ Only header   
| Transactions    | ✅ Always        | ✅/❌ Recent only            | ❌ Not available 
| Uncles          | ✅ Always        | ✅/⚠️ Recent, hash only old  | ❌ Not available 
| Withdrawals     | ✅ Post-Shanghai | ✅/❌ Recent only            | ❌ Not available 
+--------------------------------------------------------------------------------------+

-------------------------------------------------------------------- HEADER (source chatGPT) ------------------------------------------------------------------

Index   Field	                Type	    Description	                                                                        Introduced / Notes
0	    parentHash	            32 bytes	Keccak-256 hash of the parent block’s header	                                    Genesis
1	    sha3Uncles	            32 bytes    Hash of the RLP of the uncle list	                                                Frontier
2	    miner (a.k.a. coinbase)	20 bytes	Address that received block rewards fees                                            Frontier (in post-Merge, used as “fee recipient”)
3	    stateRoot	            32 bytes	Root of the state trie after all transactions	                                    Frontier
4	    transactionsRoot	    32 bytes	Root of the trie of all transactions	                                            Frontier
5	    receiptsRoot	        32 bytes	Root of the trie of all receipts	                                                Frontier
6	    logsBloom	            256 bytes	Bloom filter for logs	                                                            Frontier
7	    difficulty	            uint256	    PoW difficulty target	                                                            Frontier → set to 0 after Merge
8	    number	                uint64	    Block height	                                                                    Frontier
9	    gasLimit	            uint64	    Max gas allowed in block	                                                        Frontier
10	    gasUsed	                uint64	    Total gas consumed by all txs	                                                    Frontier
11	    timestamp	            uint64	    Unix timestamp	                                                                    Frontier
12	    extraData	            bytes	    Arbitrary 32-byte field	                                                            Frontier (still used by validators)
13	    mixHash	                32 bytes	PoW mixHash (→ now used for randomness after Merge)	                                Frontier (used for randomness post-Merge)
14	    nonce	                8 bytes	    PoW nonce                   	                                                    Frontier (ignored post-Merge)
15	    baseFeePerGas	        uint256	    Base fee per gas (EIP-1559)	                                                        London (EIP-1559)
16	    withdrawalsRoot	        32 bytes	Root of withdrawals list	                                                        Shanghai / Shapella (EIP-4895)
17	    blobGasUsed	            uint64	    Total blob gas used	                                                                Dencun (EIP-4844)
18	    excessBlobGas	        uint64	    Excess blob gas from previous block	                                                Dencun (EIP-4844)
19	    parentBeaconBlockRoot	32 bytes	Hash of parent beacon block	                                                        The Merge (EIP-4788)
20      requests-hash           32 bytes    Requests hash from the Execution Layer to the Consensus Layer                       Pectra (EIP-7685)


--------------------------------- HEADER (source https://github.com/ethereum/devp2p/blob/master/caps/eth.md#blockrangeupdate-0x11) ----------------------------

header = [
    parent-hash: B_32,
    ommers-hash: B_32,
    coinbase: B_20,
    state-root: B_32,
    txs-root: B_32,
    receipts-root: B_32,
    bloom: B_256,
    difficulty: P,
    number: P,
    gas-limit: P,
    gas-used: P,
    time: P,
    extradata: B,
    mix-digest: B_32,
    block-nonce: B_8,
    basefee-per-gas: P,
    withdrawals-root: B_32,
    blob-gas-used: P,
    excess-blob-gas: P,
    parent-beacon-root: B_32,
    requests-hash: B_32,            
]

---------------------------------------------------------------------------- EXAMPLES ---------------------------------------------------------------------------

curl https://hoodi.infura.io/v3/3d0224e07a8d48e28f825a51b0b25383   -X POST   -H "Content-Type: application/json"   -d '{"jsonrpc": "2.0", "method": "eth_getBlockByNumber", "params": ["0x179DCB", true], "id": 1}'

"transactionsRoot":"0x7459532742aecb6526b9e6a7af8890bdc247dd411df46eabf4156f2ce666b47c"

--------------------------

curl http://127.0.0.1:8545   -X POST   -H "Content-Type: application/json"   -d '{"jsonrpc": "2.0", "method": "debug_getRawBlock", "params": ["1413507"], "id": 1}'

Body of block 1413507:
    - 3 Transactions
    - 0 Uncles
    - 16 Withdrawals

0xf90d6ff9027ea0eb4b643299f51e767da83ad61757c5584966104ab32fe169789ef1defcb6c7a6a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479471b981b8aeade9af6363ab9a2b8dc9b70bf3c8c6a0943215790c92378cd37c2e4fa936dcfcb91fb1bc69066f2676f881196f1b6abfa031e0b4bef6829874bd76e7085c74fbe99c680d64a19b526ed5a11dd148c17e07a014c4cdee073c1ebcd0bb0baaefa26cbe22c38c8e7eb8e7f8b12ca382f430e0ebb901000000400000000040100000000000000081084000000300000000800000018000001080000000010000020000000080008000000000000100020802000800000040010014000000400020001c0000040001000000200100000000110000000000000400000240024004080100001808000000000000400000000400100100000000402020004800000000200400120000000000000000280041880200420000000804000000000000800801002000200200000004000080420000100000008800000008060001000100036100008801000100040002001400000404001000200003000808000000000100120000900000800002000240000010000800040000008083159183840392a220832a78078468ee6da499657269676f6e2d332e332e302d6465762d6465306437396639a0efc5e03c6d17898dbf0d67677cb27250b2fa13aaee404328280df82b844dcaf2880000000000000000843efa9114a073f92d4d10cc413ed2c6aa1b6e0756416b050aba3ccde4bfdfe8aae6ea5bc0298080a06fc227593814c2b7b2904c7b27e2a03d8da67eb59afaafa50ad2ae42d9c68395a0e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855f908b7b902da02f902d683088bb08289718406ebfd198482e1a259830ed9369491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000328d6c70cd1ca8e45598aedcbe3683af02bb309f00000000000000000000000000000000000000000000000000000000001591816a4dbd1b17e9fab83c4fe7d176edbdd6f5071fe221a4d55d7678661d566072ef88ec12be3b9ec1735673db639becd4216b5b13482ad486af47fe15d78769926500000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d1e52cd4d70471c9089417b3cf151b8f9866d3b1bb7ad074f78c02764de3658f90c15e1858d23395b7f2e68697a8945ede6c7e35fd9dd3ae8905d6f33187e5cbf00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a0af0d79ddd8d4bee4248fe756426f4b76fca523cc2736c5c71a25d0129c424f23a0360f0a588183a88d121103fb6d3f2943325bdbdbd5f90a490f49a64fae237c8bb902fa02f902f683088bb08209138406ebfd198482e1a259830f0ec79491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9028496051d56000000000000000000000000a81b7f5d3da9b70b79abb7274f8e73ba9e6a31400000000000000000000000000000000000000000000000000000000000159181a24c8c2907ba8eef67b6db5264f70dea187a3b3dad03f8aba580368f9869b5e888ec12be3b9ec1735673db639becd4216b5b13482ad486af47fe15d78769926500000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000260255e9238bb3b01ae7234e3a560b9d16f32e7e6b564e303acefff1c99ce73d94606dca2d13dcdb29054601a4de0466cf6bed874de99520e40dda645fe1d2d5b182759321c91272b28b3e0e561b9a3ba2ac00ed677a105b025c89e14f0e699462629caf77ede65188f93ec0926e5d54d3abddf273777dd67d2a5a89d46598dbc1b2c1bcb9a4a767979e12db8795be121b752c6fa08518cc8fbade88dd47d8e64ce25f0983d40a7848a2f4cbc3a81b130e7f3a399fab49a51ee5efa0bf3219733f009b53a79a07d134a92dd004333620c7b7dc7ed3496e2f78d0eb9a253160a79a10585f94441367ef209d15c35e4766bf224b1db027f4962a55395931e35508f8900000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003e5768616c65416c6572745f3078643864613662663236393634616639643765656439653033653533343135643337616139363034355f323530303055534400000000000000000000000000000000000000000000000000000000000000000000c080a044ff66f7f34c0a77f76550d0767e6f2a2e6793e87c1810ee185b01ee191db06da00910e18cb842b1ec38ef857b6294acce57024abe4bbf9c30955c6cd440bb2b3cb902da02f902d683088bb0824b5e8406ebfd198482e1a259830e6f2e9491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000ebdb5b0cc1c1c182c3f7869d3214c4baabb6d6fc00000000000000000000000000000000000000000000000000000000001591814d2791b3920916e5bdcdf04db337e84db7815fa9f1f97b1ad032f408548cd34b88ec12be3b9ec1735673db639becd4216b5b13482ad486af47fe15d78769926500000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002401aef946ee8cb0bbff108053e7fb06cb7a88c5a146349abd67d41a24a4a70be731ca21f3a8b39f5ea461753c5b7071befa2ec5486d7d6e789fc0bd6696a60ee2916af0a60312a763425a0a728e8324bf50f45ed5f5388716526fb0f6263ca9d22266a39f38903f223b0b4a6cdad9f29d57c37c7102bb05a1f10c9ac299e902dad1bfd628d978d32625c349336d590f4ba37674c89557d5e46969852777c8cae762a09aff5ec04d8a23bb784cbc2e3e4947fb6813bb67e4ca0a165edfb5109d5582af2c6302ab8993336e95e71dc287178130fb360091d78dc7868bfd6da443fc323e98bd64478a8bdd2428453131f48d9a4d34eb7f8c7e5da43538ae049e9297900000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000b6c616479303037626573740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0ff11b1e25885ba05e29062f9bf81d8ebc8c5b88f3c29f0b51d01975da8ed17a1a007abd312c7b34bc576e029258b01ebcdf643a18e06236f170f5c3173fcaf6dcfc0f90230e28401570daf830fe6d094e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083316822e28401570db0830fe6d194e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083312568e28401570db1830fe6d294e5061fe5b4d0bd260f1ff80fa919e339f1f5c3308331624ce28401570db2830fe6d394e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083316152e28401570db3830fe6d494e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083314f52e28401570db4830fe6d594e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083317456e28401570db5830fe6d694e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083313935e28401570db6830fe6d794e5061fe5b4d0bd260f1ff80fa919e339f1f5c3308331665ae28401570db7830fe6d894e5061fe5b4d0bd260f1ff80fa919e339f1f5c330833139a4e28401570db8830fe6d994e5061fe5b4d0bd260f1ff80fa919e339f1f5c3308330dd89e28401570db9830fe6da94e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083313ba2e28401570dba830fe6db94e5061fe5b4d0bd260f1ff80fa919e339f1f5c3308331716be28401570dbb830fe6dc94e5061fe5b4d0bd260f1ff80fa919e339f1f5c330833177bce28401570dbc830fe6dd94e5061fe5b4d0bd260f1ff80fa919e339f1f5c3308331442be28401570dbd830fe6de94e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083316c9ce28401570dbe830fe6df94e5061fe5b4d0bd260f1ff80fa919e339f1f5c33083317656

b902da02f902d683088bb08289718406ebfd198482e1a259830ed9369491cb447bafc6e0ea0f4fe056f5a9b1f14bb06e5d80b9026496051d56000000000000000000000000328d6c70cd1ca8e45598aedcbe3683af02bb309f00000000000000000000000000000000000000000000000000000000001591816a4dbd1b17e9fab83c4fe7d176edbdd6f5071fe221a4d55d7678661d566072ef88ec12be3b9ec1735673db639becd4216b5b13482ad486af47fe15d78769926500000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002402ea2a60f8719ed0df1b24e8c6211e9baf8fa89ebac54027052cc7f9fb846e66a2b717dd287fe95288a096ab65379549295446dc08a7d4bf6dda9813e8ade66c701c18d1171bf542420bbe786ece560a4f80f982fbb7de983d272db821d28058807a87eb688dfd8652447324b24448d36aa54f7dc47f46aee044818d2e14e54b4059c69f44df7b67a7b5a18b679ed3301921d712c5ed71db739c4aa12611a1b3f2f86ff2d2799db489e6556353217baa277ad0377515c5a69c9585700c09ad58d1e52cd4d70471c9089417b3cf151b8f9866d3b1bb7ad074f78c02764de3658f90c15e1858d23395b7f2e68697a8945ede6c7e35fd9dd3ae8905d6f33187e5cbf00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c616369647261696e3632343300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a0af0d79ddd8d4bee4248fe756426f4b76fca523cc2736c5c71a25d0129c424f23a0360f0a588183a88d121103fb6d3f2943325bdbdbd5f90a490f49a64fae237c8b


b855
f9 08b7
    b9 02da
        02f902... (1st transaction)

